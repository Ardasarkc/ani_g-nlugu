<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ’– Arda & Asel - Ortak AnÄ± GÃ¼nlÃ¼ÄŸÃ¼</title>
    <meta name="description" content="Arda ve Asel'in ortak anÄ± gÃ¼nlÃ¼ÄŸÃ¼ ve iliÅŸki takvimi">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&family=Dancing+Script:wght@700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>

<body data-bg="purple-hearts">
    <!-- Login Screen -->
    <div class="login-screen" id="loginScreen">
        <div class="login-container">
            <div class="login-header">
                <h1>Arda <span class="ampersand">&</span> Asel</h1>
                <p>Ortak AnÄ± GÃ¼nlÃ¼ÄŸÃ¼mÃ¼z</p>
            </div>
            <div class="login-buttons">
                <button class="login-btn arda-login" onclick="showPasswordInput('arda')">
                    <div class="login-avatar arda-avatar"><img src="images/arda_avatar.png" alt="Arda"></div>
                    <span>Arda</span>
                </button>
                <button class="login-btn asel-login" onclick="showPasswordInput('asel')">
                    <div class="login-avatar asel-avatar"><img src="images/asel_avatar.png" alt="Asel"></div>
                    <span>Asel</span>
                </button>
            </div>
            <div class="password-input-section" id="passwordSection" style="display: none;">
                <p id="loginUserLabel">Åifrenizi girin</p>
                <input type="password" id="passwordInput" placeholder="Åifre..."
                    onkeypress="handlePasswordKeypress(event)">
                <button class="password-submit-btn" onclick="submitPassword()">GiriÅŸ Yap ğŸ’•</button>
                <p class="error-message" id="errorMessage"></p>
            </div>
        </div>
    </div>

    <!-- Success Toast - Outside container so always visible -->
    <div class="toast-notification" id="successToast">
        <span class="toast-icon">âœ…</span>
        <span class="toast-message">AnÄ± baÅŸarÄ±yla kaydedildi! ğŸ’•</span>
    </div>

    <div class="app-container" id="appContainer" style="display: none;">
        <!-- Floating Hearts Background -->
        <div class="hearts-bg" id="heartsBg"></div>

        <!-- Connection Status -->
        <div class="connection-status" id="connectionStatus">
            <span class="status-dot"></span>
            <span class="status-text">BaÄŸlanÄ±yor...</span>
        </div>

        <!-- Header -->
        <header class="header">
            <button class="settings-btn" onclick="openSettingsModal()" title="Ayarlar">âš™ï¸</button>
            <div class="logo">
                <h1>Arda <span class="ampersand">&</span> Asel</h1>
            </div>
            <p class="subtitle">Ortak AnÄ± GÃ¼nlÃ¼ÄŸÃ¼mÃ¼z</p>
        </header>

        <!-- Profile Tabs -->
        <nav class="profile-tabs">
            <button class="tab-btn active" data-tab="arda" id="tabArda">
                <div class="avatar arda-avatar"><img src="images/arda_avatar.png" alt="Arda"></div>
                <span>Arda</span>
            </button>
            <button class="tab-btn" data-tab="asel" id="tabAsel">
                <div class="avatar asel-avatar"><img src="images/asel_avatar.png" alt="Asel"></div>
                <span>Asel</span>
            </button>
            <button class="tab-btn" data-tab="together" id="tabTogether">
                <div class="avatar together-avatar">ğŸ’•</div>
                <span>Birlikte</span>
            </button>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Calendar Section -->
            <section class="calendar-section">
                <div class="calendar-header">
                    <button class="nav-btn" id="prevMonth">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <polyline points="15,18 9,12 15,6"></polyline>
                        </svg>
                    </button>
                    <h2 class="month-year" id="monthYear">AralÄ±k 2025</h2>
                    <button class="nav-btn" id="nextMonth">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <polyline points="9,6 15,12 9,18"></polyline>
                        </svg>
                    </button>
                </div>
                <div class="calendar-grid">
                    <div class="weekdays">
                        <span>Pzt</span>
                        <span>Sal</span>
                        <span>Ã‡ar</span>
                        <span>Per</span>
                        <span>Cum</span>
                        <span>Cmt</span>
                        <span>Paz</span>
                    </div>
                    <div class="days" id="calendarDays"></div>
                </div>
            </section>

            <!-- Memory Panel -->
            <section class="memory-panel" id="memoryPanel">
                <div class="panel-header">
                    <h3 id="selectedDate">Bir tarih seÃ§in</h3>
                    <button class="add-memory-btn" id="addMemoryBtn" style="display: none;">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <line x1="12" y1="5" x2="12" y2="19"></line>
                            <line x1="5" y1="12" x2="19" y2="12"></line>
                        </svg>
                        AnÄ± Ekle
                    </button>
                </div>
                <div class="memories-list" id="memoriesList">
                    <div class="empty-state">
                        <div class="empty-icon">ğŸ“…</div>
                        <p>Takvimden bir tarih seÃ§erek anÄ±larÄ±nÄ±zÄ± gÃ¶rÃ¼ntÃ¼leyin</p>
                    </div>
                </div>
            </section>
        </main>

        <!-- Add Memory Modal -->
        <div class="modal-overlay" id="modalOverlay">
            <div class="modal">
                <div class="modal-header">
                    <h3>âœ¨ Yeni AnÄ± Ekle</h3>
                    <button class="close-btn" id="closeModal">&times;</button>
                </div>
                <form id="memoryForm">
                    <div class="form-group">
                        <label for="memoryTitle">BaÅŸlÄ±k</label>
                        <input type="text" id="memoryTitle" placeholder="AnÄ±nÄ±n baÅŸlÄ±ÄŸÄ±..." required>
                    </div>
                    <div class="form-group">
                        <label for="memoryContent">AnÄ±</label>
                        <textarea id="memoryContent" rows="4" placeholder="Bu Ã¶zel anÄ±yÄ± yazÄ±n..." required></textarea>
                    </div>
                    <div class="form-group">
                        <label>FotoÄŸraf Ekle</label>
                        <div class="upload-controls">
                            <input type="file" id="memoryPhoto" accept="image/*" style="display: none;">
                            <button type="button" class="upload-btn"
                                onclick="document.getElementById('memoryPhoto').click()">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                                    <circle cx="8.5" cy="8.5" r="1.5"></circle>
                                    <polyline points="21 15 16 10 5 21"></polyline>
                                </svg>
                                FotoÄŸraf SeÃ§
                            </button>
                            <span class="file-name" id="fileName"></span>
                        </div>
                        <div id="imagePreviewContainer" style="display: none; margin-top: 10px; position: relative;">
                            <img id="imagePreview" src="" alt="Ã–nizleme"
                                style="max-width: 100%; max-height: 200px; border-radius: 8px;">
                            <button type="button" class="remove-image-btn" onclick="removeSelectedImage()"
                                style="position: absolute; top: 5px; right: 5px; background: rgba(0,0,0,0.5); color: white; border: none; border-radius: 50%; width: 24px; height: 24px; cursor: pointer; display: flex; align-items: center; justify-content: center;">Ã—</button>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="memoryMood">Ruh Hali</label>
                        <div class="mood-selector">
                            <button type="button" class="mood-btn" data-mood="ğŸ’•">ğŸ’•</button>
                            <button type="button" class="mood-btn" data-mood="ğŸ¥°">ğŸ¥°</button>
                            <button type="button" class="mood-btn" data-mood="ğŸ˜Š">ğŸ˜Š</button>
                            <button type="button" class="mood-btn" data-mood="ğŸ‰">ğŸ‰</button>
                            <button type="button" class="mood-btn" data-mood="ğŸŒ¹">ğŸŒ¹</button>
                            <button type="button" class="mood-btn" data-mood="âœ¨">âœ¨</button>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Kimden?</label>
                        <div class="author-selector">
                            <button type="button" class="author-btn" data-author="arda">
                                <div class="avatar arda-avatar small"><img src="images/arda_avatar.png" alt="A"></div>
                                Arda
                            </button>
                            <button type="button" class="author-btn" data-author="asel">
                                <div class="avatar asel-avatar small"><img src="images/asel_avatar.png" alt="A"></div>
                                Asel
                            </button>
                            <button type="button" class="author-btn" data-author="together">
                                <div class="avatar together-avatar small">ğŸ’•</div>
                                Birlikte
                            </button>
                        </div>
                    </div>
                    <button type="button" class="submit-btn" onclick="saveMemory()">ğŸ’– AnÄ±yÄ±
                        Kaydet</button>
                </form>
            </div>
        </div>

        <!-- Memory Detail Modal -->
        <div class="modal-overlay" id="memoryDetailModal">
            <div class="modal memory-detail-modal">
                <div class="modal-header">
                    <h2 id="detailTitle">ğŸ’• AnÄ± BaÅŸlÄ±ÄŸÄ±</h2>
                    <button class="close-btn" onclick="closeDetailModal()">Ã—</button>
                </div>
                <div class="memory-detail-content">
                    <div class="detail-mood" id="detailMood">ğŸ’•</div>
                    <p class="detail-text" id="detailContent">AnÄ± iÃ§eriÄŸi burada gÃ¶rÃ¼necek...</p>
                    <div class="detail-meta">
                        <span class="detail-author" id="detailAuthor">
                            <div class="avatar arda-avatar small">A</div>
                            Arda
                        </span>
                        <span class="detail-date" id="detailDate">12 AralÄ±k 2025</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Settings Modal -->
        <div class="modal-overlay" id="settingsModal">
            <div class="modal settings-modal">
                <div class="modal-header">
                    <h2>âš™ï¸ Ayarlar</h2>
                    <button class="close-btn" onclick="closeSettingsModal()">Ã—</button>
                </div>
                <div class="modal-content">
                    <div class="settings-section">
                        <div class="settings-section">
                            <h3>ğŸ¨ MenÃ¼ TemasÄ±</h3>
                            <div class="theme-grid">
                                <button class="theme-btn active" id="theme-default" onclick="setMenuTheme('default')">
                                    <div class="theme-preview default-preview"></div>
                                    <span>Romantik Pembe</span>
                                </button>
                                <button class="theme-btn" id="theme-light-blue" onclick="setMenuTheme('light-blue')">
                                    <div class="theme-preview light-blue-preview"></div>
                                    <span>GÃ¶k Mavisi</span>
                                </button>
                                <button class="theme-btn" id="theme-dark-blue" onclick="setMenuTheme('dark-blue')">
                                    <div class="theme-preview dark-blue-preview"></div>
                                    <span>Gece Mavisi</span>
                                </button>
                                <button class="theme-btn" id="theme-white" onclick="setMenuTheme('white')">
                                    <div class="theme-preview white-preview"
                                        style="background: white; border: 1px solid #ddd;"></div>
                                    <span>Beyaz</span>
                                </button>
                                <button class="theme-btn" id="theme-black" onclick="setMenuTheme('black')">
                                    <div class="theme-preview black-preview" style="background: black;"></div>
                                    <span>Siyah</span>
                                </button>
                            </div>
                        </div>

                        <div class="settings-section">
                            <h3>ğŸŒŒ Arka Plan SeÃ§imi</h3>
                            <div class="theme-grid">
                                <button class="theme-btn active" id="bg-purple-hearts"
                                    onclick="setBackgroundTheme('purple-hearts')">
                                    <div class="theme-preview"
                                        style="background: linear-gradient(135deg, #1a0b2e 0%, #0f0518 100%);"></div>
                                    <span>Mor Kalpler</span>
                                </button>
                                <button class="theme-btn" id="bg-pitch-black"
                                    onclick="setBackgroundTheme('pitch-black')">
                                    <div class="theme-preview" style="background: #000;"></div>
                                    <span>Zifiri Siyah</span>
                                </button>
                                <button class="theme-btn" id="bg-starry-night"
                                    onclick="setBackgroundTheme('starry-night')">
                                    <div class="theme-preview"
                                        style="background: linear-gradient(to bottom, #020024 0%, #090979 35%, #00d4ff 100%);">
                                    </div>
                                    <span>YÄ±ldÄ±zlÄ± Gece</span>
                                </button>
                                <button class="theme-btn" id="bg-sunset" onclick="setBackgroundTheme('sunset')">
                                    <div class="theme-preview"
                                        style="background: linear-gradient(to bottom, #ff512f 0%, #dd2476 100%);"></div>
                                    <span>GÃ¼n BatÄ±mÄ±</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Relationship Stats -->
        <footer class="stats-footer">
            <div class="live-counter" id="liveCounter">
                <div class="counter-title">ğŸ’• Birlikte GeÃ§en SÃ¼re</div>
                <div class="counter-display">
                    <div class="counter-item">
                        <span class="counter-number" id="counterDays">0</span>
                        <span class="counter-label">GÃ¼n</span>
                    </div>
                    <div class="counter-separator">:</div>
                    <div class="counter-item">
                        <span class="counter-number" id="counterHours">0</span>
                        <span class="counter-label">Saat</span>
                    </div>
                    <div class="counter-separator">:</div>
                    <div class="counter-item">
                        <span class="counter-number" id="counterMinutes">0</span>
                        <span class="counter-label">Dakika</span>
                    </div>
                    <div class="counter-separator">:</div>
                    <div class="counter-item">
                        <span class="counter-number" id="counterSeconds">0</span>
                        <span class="counter-label">Saniye</span>
                    </div>
                </div>
                <div class="counter-date">27 EylÃ¼l 2025'ten beri ğŸ’–</div>
            </div>
            <div class="stat-card" id="totalMemories">
                <span class="stat-number">0</span>
                <span class="stat-label">Toplam AnÄ±</span>
            </div>
        </footer>

        <!-- Logout Button -->
        <button class="logout-btn" id="logoutBtn" onclick="logout()">
            Ã‡Ä±kÄ±ÅŸ Yap
        </button>
    </div>

    <!-- Firebase SDK -->
    <script type="module">
        // Firebase yapÄ±landÄ±rmasÄ± - AÅAÄIDAKÄ° DEÄERLERÄ° KENDÄ° FIREBASE PROJENÄ°ZLE DEÄÄ°ÅTÄ°RÄ°N
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, addDoc, deleteDoc, doc, onSnapshot, query, orderBy } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
        import { getStorage, ref, uploadBytes, getDownloadURL } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-storage.js";

        // âš ï¸ BU ALANI KENDÄ° FIREBASE BÄ°LGÄ°LERÄ°NÄ°ZLE DEÄÄ°ÅTÄ°RÄ°N âš ï¸
        const firebaseConfig = {
            apiKey: "AIzaSyBgrdrNqBmFvT4n0jsuwUfZBQ15ZaMxo0",
            authDomain: "arda-asel-ani-gunlugu.firebaseapp.com",
            projectId: "arda-asel-ani-gunlugu",
            storageBucket: "arda-asel-ani-gunlugu.firebasestorage.app",
            messagingSenderId: "390367131016",
            appId: "1:390367131016:web:a7911a973fd5c82e2d363d"
        };

        // Firebase'i baÅŸlat
        let app, db, storage;
        let isFirebaseConnected = false;

        try {
            app = initializeApp(firebaseConfig);
            db = getFirestore(app);
            storage = getStorage(app);
            isFirebaseConnected = true;
            console.log('ğŸ”¥ Firebase baÄŸlantÄ±sÄ± baÅŸarÄ±lÄ±!');
        } catch (error) {
            console.warn('Firebase baÄŸlanamadÄ±, localStorage kullanÄ±lacak:', error);
        }

        // Firebase fonksiyonlarÄ±nÄ± global yap
        window.firebaseDB = db;
        window.firebaseStorage = storage;
        window.firebaseConnected = isFirebaseConnected;
        window.firebaseModules = {
            collection, addDoc, deleteDoc, doc, onSnapshot, query, orderBy,
            ref, uploadBytes, getDownloadURL
        };
    </script>
    <script src="app.js?v=17"></script>
</body>

</html>